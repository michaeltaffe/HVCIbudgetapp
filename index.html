<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Time–Budget Dashboard (Final Prototype)</title>
<link rel="stylesheet" href="https://unpkg.com/lucide-static@latest/font/lucide.css">
<style>
:root{
  --bg:#f7f6f2; --card:#fff; --ink:#16181d; --muted:#5f6b76;
  --ok:#2e7d32; --warn:#f9a825; --bad:#c62828; --track:#e9edf1;
  --shadow:0 6px 22px rgba(0,0,0,.08); --subtle:#eef1f5; --accent:#0066cc;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--ink)}
.wrap{max-width:480px;margin:16px auto 100px;padding:0 12px}
.card{background:var(--card);border-radius:16px;padding:16px;box-shadow:var(--shadow);margin-bottom:14px}
h1,h2{margin:0 0 10px}
.subtitle{color:var(--muted);font-size:13px}

/* Controls */
.controls{display:flex;align-items:center;justify-content:space-between;margin-top:8px}
.segmented{display:inline-flex;background:var(--subtle);border-radius:12px;padding:3px;gap:3px}
.segmented button{
  appearance:none;border:0;background:transparent;padding:6px 10px;border-radius:10px;
  font-weight:600;color:#3b4046;cursor:pointer;font-size:13px;transition:background .2s
}
.segmented button.active{background:#fff;color:#000;box-shadow:0 2px 6px rgba(0,0,0,.08)}

/* Context */
.context{
  background:var(--subtle);border-radius:12px;padding:10px 12px;margin-top:10px;font-size:13px;line-height:1.35
}
.context a{color:var(--accent);font-weight:600;text-decoration:none;cursor:pointer}
.context .why{display:none;color:var(--muted);margin-top:6px;font-size:12px}

/* Bars */
.bars{display:grid;gap:12px;margin-top:6px}
.row{display:flex;align-items:center;gap:10px}
.label{min-width:120px;font-weight:600;font-size:13px}
.bar{flex:1;height:18px;background:var(--track);border-radius:8px;position:relative;overflow:hidden;cursor:pointer}
.fill{height:100%;border-radius:8px;transition:width .35s ease, background .35s ease}
.pct{position:absolute;right:6px;top:50%;transform:translateY(-50%);font-size:11px;font-weight:700}
.hint{
  position:absolute;left:0;bottom:125%;background:#111;color:#fff;font-size:11px;
  padding:5px 8px;border-radius:6px;box-shadow:0 6px 14px rgba(0,0,0,.2);
  opacity:0;transform:translateY(6px);transition:opacity .2s, transform .2s;white-space:nowrap;pointer-events:none
}
.bar:hover .hint{opacity:1;transform:translateY(0)}

/* Events (Upcoming Schedule Sample) */
.events .item{display:flex;justify-content:space-between;align-items:center;background:var(--subtle);
  padding:10px 12px;border-radius:10px;margin:8px 0}
.events .title{font-weight:600;font-size:13px}
.pill{display:inline-block;margin-left:6px;padding:2px 8px;border-radius:999px;background:#fff;font-size:11px;border:1px solid #e5e9ee;color:#3b4046}
.events .amt{font-weight:700;font-size:13px}

/* Footer (square icon buttons) */
.footer{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e6e6ea;padding:12px 16px;box-shadow:0 -3px 15px rgba(0,0,0,.05)}
.chips{display:flex;gap:14px;justify-content:center}
.chip{
  width:52px;height:52px;border:2px solid #f28e1c;border-radius:14px;background:#fff;
  display:flex;align-items:center;justify-content:center;transition:background .2s, transform .2s
}
.chip:hover{background:#fdf5e6;transform:translateY(-1px)}
.chip i{font-size:22px;color:#f28e1c}
.active-chip{background:#f28e1c}
.active-chip i{color:#fff}
</style>
</head>
<body>
<div class="wrap">
  <!-- Header / Controls -->
  <div class="card">
    <h1>Time–Budget Dashboard</h1>
    <div class="controls">
      <div class="segmented" role="tablist" aria-label="Time view">
        <button id="btn-day"   role="tab" aria-selected="false">Day</button>
        <button id="btn-week"  role="tab" aria-selected="false">Week</button>
        <button id="btn-month" role="tab" aria-selected="true" class="active">Month</button>
      </div>
      <div class="subtitle" id="viewNote">(Month view)</div>
    </div>

    <!-- Smart Context Panel -->
    <div class="context">
      <span id="contextMain">Dining is at 85% of its limit. Consider one low-cost workday.</span>
      &nbsp;<a id="whyLink">Why?</a>
      <div id="contextWhy" class="why">Three dining events are planned this week (~$230). Two occur on days with other paid activities, pushing you past your weekly target.</div>
    </div>
  </div>

  <!-- Progress Overview -->
  <div class="card">
    <h2>Progress Overview</h2>
    <div class="subtitle" id="summary">Loading…</div>
    <div class="bars" id="bars"></div>
  </div>

  <!-- Upcoming Events (Sample) -->
  <div class="card events">
    <h2>Upcoming Events</h2>
    <div class="subtitle" id="eventSummary"></div>
    <div id="events"></div>
  </div>
</div>

<!-- Bottom nav (square icons) -->
<div class="footer">
  <div class="chips">
    <div class="chip active-chip" title="Home"><i class="lucide lucide-home"></i></div>
    <div class="chip" title="Calendar"><i class="lucide lucide-calendar-days"></i></div>
    <div class="chip" title="Budget"><i class="lucide lucide-wallet"></i></div>
    <div class="chip" title="Insights"><i class="lucide lucide-bar-chart-3"></i></div>
    <div class="chip" title="Settings"><i class="lucide lucide-settings"></i></div>
  </div>
</div>

<script>
/* Distinct datasets so the UI visibly changes between Day/Week/Month */
const DATA = {
  day: {
    note: "(Day view)",
    context: {
      main: "You're on track today with one moderate dining expense.",
      why:  "One dining event and one work expense are planned; both are within daily targets."
    },
    categories: [
      {cat:"Dining",         spent:10, budget:15},  // 67%
      {cat:"Work Expenses",  spent: 4, budget:20},  // 20%
      {cat:"Transportation", spent: 8, budget:12},  // 67%
      {cat:"Entertainment",  spent: 2, budget:10},  // 20%
      {cat:"Subscriptions",  spent: 5, budget: 5}   // 100%
    ],
    events: [
      {title:"Coffee meeting", category:"Work Expenses", cost:6},
      {title:"Lunch out",      category:"Dining",        cost:10},
      {title:"Gym class",      category:"Subscriptions", cost:5}
    ]
  },
  week: {
    note: "(Week view)",
    context: {
      main: "Dining is close to budget. Plan one meal at home to stay on track.",
      why:  "Three dining events (~$95) and two entertainment items (~$31) cluster midweek, raising risk of overspend."
    },
    categories: [
      {cat:"Dining",         spent:70, budget:90},  // 78%
      {cat:"Work Expenses",  spent:40, budget:60},  // 67%
      {cat:"Transportation", spent:30, budget:45},  // 67%
      {cat:"Entertainment",  spent:20, budget:50},  // 40%
      {cat:"Subscriptions",  spent:15, budget:15}   // 100%
    ],
    events: [
      {title:"Dinner w/ friends", category:"Dining",        cost:45},
      {title:"Movie night",       category:"Entertainment", cost:16},
      {title:"Transit top-up",    category:"Transportation",cost:12}
    ]
  },
  month: {
    note: "(Month view)",
    context: {
      main: "Dining is at 85% of its limit. Consider skipping one meal out next week.",
      why:  "Three dining events (~$230) fall in the same pay period as subscriptions and entertainment charges."
    },
    categories: [
      {cat:"Dining",         spent:128, budget:150}, // 85%
      {cat:"Work Expenses",  spent: 45, budget:120}, // 38%
      {cat:"Transportation", spent: 70, budget: 80}, // 88%
      {cat:"Entertainment",  spent: 95, budget:100}, // 95%
      {cat:"Subscriptions",  spent: 30, budget: 60}  // 50%
    ],
    events: [
      {title:"Client lunch",  category:"Work Expenses", cost:30},
      {title:"Concert",       category:"Entertainment", cost:80},
      {title:"Dining out",    category:"Dining",        cost:70}
    ]
  }
};

function colorFor(p){ return p<70?'var(--ok)':(p<100?'var(--warn)':'var(--bad)'); }

function renderBars(categories){
  const bars = document.getElementById('bars');
  bars.innerHTML = '';
  categories.forEach(c=>{
    const pct = Math.round((c.spent / Math.max(1,c.budget)) * 100);

    const row = document.createElement('div'); row.className='row';
    const label = document.createElement('div'); label.className='label'; label.textContent = c.cat;

    const bar = document.createElement('div'); bar.className='bar';
    const fill = document.createElement('div'); fill.className='fill';
    fill.style.width = Math.min(100,pct)+'%';
    fill.style.background = colorFor(pct);

    const pctText = document.createElement('div'); pctText.className='pct'; pctText.textContent = pct+'%';

    const hint = document.createElement('div'); hint.className='hint';
    hint.textContent = `${c.cat}: $${c.spent} of $${c.budget} • Tip: shift one event to save ~$${10 + Math.floor(Math.random()*25)}`;

    bar.appendChild(fill); bar.appendChild(pctText); bar.appendChild(hint);
    row.appendChild(label); row.appendChild(bar);
    bars.appendChild(row);
  });
}

function renderSummary(categories){
  const totalBudget = categories.reduce((a,b)=>a+b.budget,0);
  const totalSpent  = categories.reduce((a,b)=>a+b.spent,0);
  const pct = Math.round(totalSpent / Math.max(1,totalBudget) * 100);
  document.getElementById('summary').textContent = `Total spent: $${totalSpent} of $${totalBudget} (${pct}%)`;
}

function renderEvents(events){
  const list = document.getElementById('events');
  list.innerHTML = '';
  let total = 0;
  events.forEach(e=>{
    total += e.cost;
    const item = document.createElement('div'); item.className='item';
    const left = document.createElement('div'); left.className='title';
    left.textContent = e.title + ' ';
    const cat = document.createElement('span'); cat.className='pill'; cat.textContent = e.category;
    left.appendChild(cat);
    const right = document.createElement('div'); right.className='amt'; right.textContent = '$' + e.cost;
    item.appendChild(left); item.appendChild(right);
    list.appendChild(item);
  });
  document.getElementById('eventSummary').textContent = `${events.length} sample events • total ${'$'+total}`;
}

function renderContext(note, ctx){
  document.getElementById('viewNote').textContent = note;
  document.getElementById('contextMain').textContent = ctx.main;
  const why = document.getElementById('contextWhy');
  why.textContent = ctx.why;
  if (why.style.display === 'block') {
    // keep it open but ensure it matches the new view’s text
    why.textContent = ctx.why;
  }
}

function setView(view){
  document.querySelectorAll('.segmented button').forEach(b=>b.classList.remove('active'));
  document.getElementById('btn-'+view).classList.add('active');

  const d = DATA[view];
  renderContext(d.note, d.context);
  renderBars(d.categories);
  renderSummary(d.categories);
  renderEvents(d.events);
}

/* Why? link toggles explanation */
document.addEventListener('DOMContentLoaded', ()=>{
  document.getElementById('whyLink').addEventListener('click', (e)=>{
    e.preventDefault();
    const w = document.getElementById('contextWhy');
    w.style.display = (w.style.display==='block' ? 'none' : 'block');
  });

  document.getElementById('btn-day').addEventListener('click',  ()=>setView('day'));
  document.getElementById('btn-week').addEventListener('click', ()=>setView('week'));
  document.getElementById('btn-month').addEventListener('click',()=>setView('month'));

  setView('month'); // default
});
</script>
</body>
</html>
