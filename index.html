<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Balancing the Clock and the Wallet</title>
<link rel="stylesheet" href="https://unpkg.com/lucide-static@latest/font/lucide.css">
<style>
:root {
  --bg:#f7f6f2; --card:#fff; --ink:#16181d;
  --muted:#5f6b76; --ok:#2e7d32; --warn:#f9a825; --bad:#c62828;
  --track:#e9edf1; --shadow:0 6px 22px rgba(0,0,0,.08);
  --subtle:#eef1f5; --accent:#0066cc;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background:var(--bg); color:var(--ink);
}
.wrap{max-width:480px;margin:16px auto 100px;padding:0 12px}
.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  box-shadow:var(--shadow);
  margin-bottom:14px;
}
h1,h2,h3{margin:0 0 10px}
.subtitle{color:var(--muted);font-size:13px}
.pill{display:inline-block;padding:3px 8px;border-radius:999px;background:var(--subtle);color:#3b4046;font-size:11px;margin-left:6px}

/* Segmented controls */
.controls{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-top:10px;flex-wrap:wrap}
.segmented{display:inline-flex;background:var(--subtle);border-radius:12px;padding:3px;gap:3px}
.segmented button{
  appearance:none;border:0;background:transparent;
  padding:6px 10px;border-radius:10px;font-weight:600;color:#3b4046;cursor:pointer;
  transition:background .25s;
  font-size:13px;
}
.segmented button.active{
  background:#fff;color:#000;box-shadow:0 2px 6px rgba(0,0,0,.08)
}
.view-note{font-size:11px;color:var(--muted)}

/* Bars */
.bars{display:grid;grid-template-columns:1fr;gap:14px}
.bar-wrap{display:flex;flex-direction:column;gap:4px}
.label{color:#1e2328;font-weight:600;font-size:13px}
.bar{height:20px;background:var(--track);border-radius:8px;position:relative;overflow:hidden;cursor:pointer}
.fill{height:100%;border-radius:8px;transition:width .4s ease, background .4s ease}
.pct{position:absolute;right:6px;top:50%;transform:translateY(-50%);font-size:11px;font-weight:700;color:#111;text-shadow:0 1px 0 rgba(255,255,255,.9)}
.pct.invert{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5)}
.hint{
  position:absolute;left:0;bottom:130%;
  background:#111;color:#fff;font-size:11px;
  padding:5px 8px;border-radius:6px;
  box-shadow:0 6px 14px rgba(0,0,0,.2);
  opacity:0;transform:translateY(6px);
  transition:opacity .2s, transform .2s;
  white-space:nowrap;pointer-events:none;
}
.bar:hover .hint{opacity:1;transform:translateY(0)}

/* Context panel */
.context{
  background:var(--subtle);
  border-radius:12px;
  padding:12px 14px;
  font-size:13px;
  margin-bottom:12px;
}
.context a{color:var(--accent);font-weight:600;cursor:pointer;text-decoration:none}
.context-detail{display:none;font-size:12px;color:var(--muted);margin-top:5px;line-height:1.4}

/* Event list */
.events .row{display:flex;justify-content:space-between;align-items:center;background:var(--subtle);padding:8px 10px;border-radius:10px;margin:6px 0;font-size:13px}
.events .title{font-weight:600}
.events .amt{font-weight:700}

/* Footer icons */
.footer{
  position:fixed;left:0;right:0;bottom:0;
  background:#fff;border-top:1px solid #e6e6ea;
  padding:12px 16px;box-shadow:0 -3px 15px rgba(0,0,0,.05);
}
.chips{
  display:flex;gap:14px;justify-content:center;
}
.chip{
  width:52px;height:52px;border:2px solid #f28e1c;border-radius:14px;opacity:.9;
  display:flex;align-items:center;justify-content:center;
  transition:background .2s, transform .2s;
}
.chip.active{background:#f28e1c;color:#fff;transform:scale(1.05)}
.chip i{font-size:22px;color:#f28e1c}
.chip.active i{color:#fff}
</style>
</head>
<body>
<div class="wrap">
  <!-- Header -->
  <div class="card" id="summary">
    <h1>Time–Budget Dashboard <span class="pill">Demo</span></h1>
    <div class="subtitle" id="summaryText">Loading summary...</div>

    <div class="controls">
      <div class="segmented" role="tablist" aria-label="Dashboard view">
        <button id="btn-day" role="tab" aria-selected="false">Day</button>
        <button id="btn-week" role="tab" aria-selected="false">Week</button>
        <button id="btn-month" class="active" role="tab" aria-selected="true">Month</button>
      </div>
      <div id="viewNote" class="view-note">(Comparing actual spend to monthly budgets)</div>
    </div>
  </div>

  <!-- Context Panel -->
  <div class="context" id="contextPanel">
    You’ve reached <b>85%</b> of your dining budget. <a id="whyLink">Why?</a>
    <div class="context-detail" id="contextDetail">
      Three dining events scheduled this week with an expected cost of <b>$230</b>.
      Consider adjusting tomorrow’s lunch plans or moving one dining event later in the month.
    </div>
  </div>

  <!-- Progress Bars -->
  <div class="card">
    <h2>Progress Overview</h2>
    <div class="bars" id="bars"></div>
  </div>

  <!-- Events -->
  <div class="card events">
    <h2 id="eventSummary"></h2>
    <div class="subtitle" id="capline"></div>
    <div id="events"></div>
  </div>
</div>

<!-- Footer -->
<div class="footer">
  <div class="chips">
    <div class="chip active"><i class="lucide lucide-home"></i></div>
    <div class="chip"><i class="lucide lucide-calendar-days"></i></div>
    <div class="chip"><i class="lucide lucide-piggy-bank"></i></div>
    <div class="chip"><i class="lucide lucide-activity"></i></div>
    <div class="chip"><i class="lucide lucide-settings"></i></div>
  </div>
</div>

<script>
const DATA = {
  categories:[
    {category:"Dining",budget:150,spent:128},
    {category:"Work Expenses",budget:120,spent:45},
    {category:"Transportation",budget:80,spent:70},
    {category:"Entertainment",budget:100,spent:95},
    {category:"Subscriptions",budget:60,spent:30}
  ],
  events_today:[
    {title:"Dinner with Jim",category:"Dining",expected:65},
    {title:"Team Coffee",category:"Work Expenses",expected:15},
    {title:"Yoga Class",category:"Subscriptions",expected:15},
    {title:"Movie Night",category:"Entertainment",expected:20}
  ]
};

/* Color helpers */
function colorFor(p){if(p<70)return'var(--ok)';if(p<100)return'var(--warn)';return'var(--bad)';}
function fmt(x){return '$'+x.toFixed(2);}

/* Build Progress Bars */
function buildBars(scale){
  const $bars=document.getElementById('bars');
  $bars.innerHTML='';
  DATA.categories.forEach(cat=>{
    const scaledBudget=cat.budget*scale;
    const scaledSpent=cat.spent*scale;
    const pctVal=Math.round((scaledSpent/scaledBudget)*100);
    const barWrap=document.createElement('div');
    barWrap.className='bar-wrap';
    const label=document.createElement('div');label.className='label';label.textContent=cat.category;
    const bar=document.createElement('div');bar.className='bar';
    const fill=document.createElement('div');fill.className='fill';
    const pct=document.createElement('div');pct.className='pct';
    const hint=document.createElement('div');hint.className='hint';
    bar.appendChild(fill);bar.appendChild(pct);bar.appendChild(hint);
    barWrap.appendChild(label);barWrap.appendChild(bar);
    $bars.appendChild(barWrap);

    fill.style.width=Math.min(100,pctVal)+'%';
    fill.style.background=colorFor(pctVal);
    pct.textContent=pctVal+'%';
    if(pctVal>=45)pct.classList.add('invert');
    hint.textContent=`${cat.category}: ${fmt(scaledSpent)} of ${fmt(scaledBudget)} used • Forecast savings +${fmt(Math.random()*50+10)}`;
  });
}

/* Render Events */
function renderEvents(){
  const $events=document.getElementById('events');
  const $summary=document.getElementById('eventSummary');
  $events.innerHTML='';
  DATA.events_today.forEach(e=>{
    const row=document.createElement('div');row.className='row';
    const title=document.createElement('div');title.className='title';
    title.textContent=e.title+' ';
    const cat=document.createElement('span');cat.className='pill';cat.textContent=e.category;title.appendChild(cat);
    const amt=document.createElement('div');amt.className='amt';amt.textContent=fmt(e.expected);
    row.appendChild(title);row.appendChild(amt);
    $events.appendChild(row);
  });
  const total=DATA.events_today.reduce((a,b)=>a+b.expected,0);
  $summary.innerHTML=`You have <b>${DATA.events_today.length}</b> events today totaling <b>${fmt(total)}</b>.`;
  document.getElementById('capline').textContent="Weekly cap: "+fmt(200)+". Adjusting events may save "+fmt(45)+".";
}

/* Summary Header */
function updateSummary(view){
  const scale=view==='day'?0.05:(view==='week'?0.25:1);
  const remainingBudget=Math.max(0,DATA.categories.reduce((a,b)=>a+(b.budget-b.spent),0)*scale);
  const totalEvents = DATA.events_today.length;
  const totalCost = DATA.events_today.reduce((a,b)=>a+b.expected,0)*scale;
  document.getElementById('summaryText').innerHTML =
    `<b>${totalEvents}</b> events • Cost <b>${fmt(totalCost)}</b> • Remaining <b>${fmt(remainingBudget)}</b>`;
  return scale;
}

/* View Switch */
function setView(view){
  document.querySelectorAll('.segmented button').forEach(b=>b.classList.remove('active'));
  document.getElementById('btn-'+view).classList.add('active');
  document.getElementById('viewNote').textContent=`(${view.charAt(0).toUpperCase()+view.slice(1)} view of budgets and spending)`;
  const scale=updateSummary(view);
  buildBars(scale);
  renderEvents();
}

/* Context Expansion */
document.getElementById('whyLink').addEventListener('click',()=>{
  const d=document.getElementById('contextDetail');
  d.style.display=d.style.display==='block'?'none':'block';
});

/* Initialize */
document.getElementById('btn-day').addEventListener('click',()=>setView('day'));
document.getElementById('btn-week').addEventListener('click',()=>setView('week'));
document.getElementById('btn-month').addEventListener('click',()=>setView('month'));
setView('month');
</script>
</body>
</html>
