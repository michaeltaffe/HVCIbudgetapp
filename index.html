<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Time–Budget Dashboard (Final Prototype)</title>
<link rel="stylesheet" href="https://unpkg.com/lucide-static@latest/font/lucide.css">
<style>
:root{
  --bg:#f7f6f2; --card:#fff; --ink:#16181d; --muted:#5f6b76;
  --ok:#2e7d32; --warn:#f9a825; --bad:#c62828; --track:#e9edf1;
  --shadow:0 6px 22px rgba(0,0,0,.08); --subtle:#eef1f5; --accent:#0066cc;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--ink)}
.wrap{max-width:480px;margin:16px auto 100px;padding:0 12px}
.card{background:var(--card);border-radius:16px;padding:16px;box-shadow:var(--shadow);margin-bottom:14px}
h1,h2{margin:0 0 10px}
.subtitle{color:var(--muted);font-size:13px}

.controls{display:flex;align-items:center;justify-content:space-between;margin-top:8px}
.segmented{display:inline-flex;background:var(--subtle);border-radius:12px;padding:3px;gap:3px}
.segmented button{
  appearance:none;border:0;background:transparent;padding:6px 10px;border-radius:10px;
  font-weight:600;color:#3b4046;cursor:pointer;font-size:13px;transition:background .2s
}
.segmented button.active{background:#fff;color:#000;box-shadow:0 2px 6px rgba(0,0,0,.08)}

.bars{display:grid;gap:12px;margin-top:8px}
.row{display:flex;align-items:center;gap:10px}
.label{min-width:120px;font-weight:600;font-size:13px}
.bar{flex:1;height:18px;background:var(--track);border-radius:8px;position:relative;overflow:hidden}
.fill{height:100%;border-radius:8px;transition:width .35s ease, background .35s ease}
.pct{position:absolute;right:6px;top:50%;transform:translateY(-50%);font-size:11px;font-weight:700}

.context-panel{font-size:13px;background:var(--subtle);padding:10px 12px;border-radius:12px;margin-top:8px;color:#1d1f22}

.events .row{display:flex;justify-content:space-between;align-items:center;background:var(--subtle);
  padding:10px 12px;border-radius:10px;margin:8px 0}
.events .title{font-weight:600;font-size:13px}
.events .amt{font-weight:700;font-size:13px}

.footer{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e6e6ea;
  padding:12px 16px;box-shadow:0 -3px 15px rgba(0,0,0,.05)}
.chips{display:flex;gap:14px;justify-content:center}
.chip{width:52px;height:52px;border:2px solid #f28e1c;border-radius:14px;
  display:flex;align-items:center;justify-content:center;background:#fff;transition:background .2s}
.chip:hover{background:#fdf5e6}
.chip i{font-size:22px;color:#f28e1c}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Time–Budget Dashboard</h1>
    <div class="controls">
      <div class="segmented">
        <button id="btn-day">Day</button>
        <button id="btn-week">Week</button>
        <button id="btn-month" class="active">Month</button>
      </div>
      <div class="subtitle" id="viewNote">(Month view)</div>
    </div>
    <div class="context-panel" id="contextText">
      You’re nearing your dining budget limit. Consider one low-cost workday.
    </div>
  </div>

  <div class="card">
    <h2>Progress Overview</h2>
    <div class="subtitle" id="summary">Loading...</div>
    <div class="bars" id="bars"></div>
  </div>

  <div class="card events">
    <h2>Schedule Overview</h2>
    <div id="eventSummary" class="subtitle"></div>
    <div id="events"></div>
  </div>
</div>

<div class="footer">
  <div class="chips">
    <div class="chip" title="Home"><i class="lucide lucide-home"></i></div>
    <div class="chip" title="Calendar"><i class="lucide lucide-calendar-days"></i></div>
    <div class="chip" title="Budget"><i class="lucide lucide-wallet"></i></div>
    <div class="chip" title="Insights"><i class="lucide lucide-bar-chart-3"></i></div>
    <div class="chip" title="Settings"><i class="lucide lucide-settings"></i></div>
  </div>
</div>

<script>
const DATA = {
  day: {
    context: "You're on track today, with one moderate expense remaining.",
    categories: [
      {cat:"Dining", spent:10, budget:15},
      {cat:"Work", spent:4, budget:20},
      {cat:"Transport", spent:8, budget:12},
      {cat:"Leisure", spent:2, budget:10}
    ],
    events:[
      {title:"Coffee meeting", category:"Work", cost:6},
      {title:"Lunch out", category:"Dining", cost:10},
      {title:"Gym class", category:"Leisure", cost:5}
    ]
  },
  week: {
    context: "Dining is close to budget. Plan a meal at home to stay on track.",
    categories: [
      {cat:"Dining", spent:70, budget:90},
      {cat:"Work", spent:40, budget:60},
      {cat:"Transport", spent:30, budget:45},
      {cat:"Leisure", spent:20, budget:50}
    ],
    events:[
      {title:"Dinner with friends", category:"Dining", cost:45},
      {title:"Work commute", category:"Transport", cost:20},
      {title:"Movie night", category:"Leisure", cost:15},
      {title:"Coworking session", category:"Work", cost:10}
    ]
  },
  month: {
    context: "Dining is at 85% of its limit. You might skip eating out once next week.",
    categories: [
      {cat:"Dining", spent:250, budget:300},
      {cat:"Work", spent:180, budget:200},
      {cat:"Transport", spent:140, budget:160},
      {cat:"Leisure", spent:120, budget:200}
    ],
    events:[
      {title:"Client lunch", category:"Work", cost:30},
      {title:"Concert", category:"Leisure", cost:80},
      {title:"Weekend trip", category:"Transport", cost:50},
      {title:"Dining out", category:"Dining", cost:70}
    ]
  }
};

function colorFor(p){ return p<70?'var(--ok)':(p<100?'var(--warn)':'var(--bad)'); }

function render(view){
  const d = DATA[view];
  const bars = document.getElementById('bars');
  bars.innerHTML = '';
  let totalSpent = 0, totalBudget = 0;

  d.categories.forEach(c=>{
    const pct = Math.round((c.spent / Math.max(1,c.budget)) * 100);
    totalSpent += c.spent; totalBudget += c.budget;

    const row = document.createElement('div'); row.className='row';
    const label = document.createElement('div'); label.className='label'; label.textContent = c.cat;
    const bar = document.createElement('div'); bar.className='bar';
    const fill = document.createElement('div'); fill.className='fill';
    fill.style.width = Math.min(100,pct)+'%';
    fill.style.background = colorFor(pct);
    const pctText = document.createElement('div'); pctText.className='pct'; pctText.textContent = pct+'%';
    bar.appendChild(fill); bar.appendChild(pctText);
    row.appendChild(label); row.appendChild(bar);
    bars.appendChild(row);
  });

  document.getElementById('summary').textContent = 
    `Total spent: $${totalSpent} of $${totalBudget} (${Math.round(totalSpent/totalBudget*100)}%)`;
  document.getElementById('contextText').textContent = d.context;

  // Events / Schedule section
  const eventList = document.getElementById('events');
  eventList.innerHTML = '';
  let totalCost = 0;
  d.events.forEach(e=>{
    const row = document.createElement('div');
    row.className='row';
    const title = document.createElement('div');
    title.className='title';
    title.textContent = e.title + ' ';
    const cat = document.createElement('span');
    cat.className='subtitle';
    cat.textContent = e.category;
    title.appendChild(cat);
    const amt = document.createElement('div');
    amt.className='amt';
    amt.textContent = '$' + e.cost;
    totalCost += e.cost;
    row.appendChild(title);
    row.appendChild(amt);
    eventList.appendChild(row);
  });
  document.getElementById('eventSummary').textContent = 
    `${d.events.length} events totaling $${totalCost}`;
  document.getElementById('viewNote').textContent = `(${view[0].toUpperCase()+view.slice(1)} view)`;
}

function setView(view){
  document.querySelectorAll('.segmented button').forEach(b=>b.classList.remove('active'));
  document.getElementById('btn-'+view).classList.add('active');
  render(view);
}

document.addEventListener('DOMContentLoaded', ()=>{
  document.getElementById('btn-day').addEventListener('click', ()=>setView('day'));
  document.getElementById('btn-week').addEventListener('click', ()=>setView('week'));
  document.getElementById('btn-month').addEventListener('click', ()=>setView('month'));
  render('month'); // default view
});
</script>
</body>
</html>
